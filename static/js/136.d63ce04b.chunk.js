"use strict";(self.webpackChunkkapusta_front_end=self.webpackChunkkapusta_front_end||[]).push([[136],{6136:(e,s,a)=>{a.r(s),a.d(s,{default:()=>w});var n=a(5043),i=a(3003),c=a(4809);const r=a(6213).A.create({baseURL:"https://goit-fs17-react-node-final-project-backend.vercel.app/",withCredentials:!0});r.interceptors.request.use((e=>{const s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2ZjQzOWExNDc4OTAyMDc4YTliMDM2NCIsInNpZCI6IkVZbGprbVh1WmtiRU11V3A0SGo0aSIsImlhdCI6MTcyNzM4NzUxMCwiZXhwIjoxNzI3OTkyMzEwfQ.48_Mm5lr-eQ6w_mx9GJN35gom-Z3P1ERw42jzQGivaw";return s&&(e.headers.Authorization=`Bearer ${s}`),e}));const t=r,o={getTransactionsForMonth:e=>t.get(`/transaction/period-data?date=${e}`)},l=(0,c.zD)("transactions/fetchTransactions",(async(e,s)=>{try{return(await o.getTransactionsForMonth(e)).data.data}catch(a){return s.rejectWithValue(a.response.data)}}));(0,c.Z0)({name:"transactions",initialState:{income:{total:0,categories:[]},expenses:{total:0,categories:[]},loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(l.pending,(e=>{e.loading=!0,e.error=null})).addCase(l.fulfilled,((e,s)=>{e.loading=!1,e.income=s.payload.incomes,e.expenses=s.payload.expenses,e.categories=s.payload.categories})).addCase(l.rejected,((e,s)=>{e.loading=!1,e.error=s.payload}))}}).reducer;var d=a(3216);const m=a.p+"static/media/symbol-defs.6b0549b73791f2b888043a4dcfd012fc.svg";var x=a(579);const h=()=>{const e=(0,d.Zp)();return(0,x.jsx)("div",{className:"main-page-container",children:(0,x.jsxs)("button",{className:"back-to-home",onClick:()=>e("/"),children:[(0,x.jsx)("div",{className:"return-arrow",children:(0,x.jsx)("svg",{className:"icon",width:"18px",height:"12px",children:(0,x.jsx)("use",{href:`${m}#icon-main-page-return-arrow`})})}),(0,x.jsx)("span",{className:"main-page-text",children:"Main Page"})]})})},p=e=>{let{currentPeriod:s,setCurrentPeriod:a,onPeriodChange:i}=e;const c=e=>{let{month:n,year:i}=s;n+=e,n<0?(n=11,i-=1):n>11&&(n=0,i+=1),i<2e3&&(i=2100),i>2100&&(i=2e3),a({month:n,year:i})};return(0,n.useEffect)((()=>{const e=`${s.year}-${String(s.month+1).padStart(2,"0")}`;i(e)}),[s,i]),(0,x.jsxs)("div",{className:"current-period",children:[(0,x.jsx)("div",{className:"text-current-period",children:"Current period:"}),(0,x.jsxs)("div",{className:"month",children:[(0,x.jsx)("span",{className:"arrow",onClick:()=>c(-1),children:(0,x.jsx)("svg",{className:"icon",width:"18px",height:"12px",children:(0,x.jsx)("use",{href:`${m}#icon-return-sign`})})}),(0,x.jsxs)("span",{className:"month-name",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][s.month]," ",s.year]}),(0,x.jsx)("span",{className:"arrow",onClick:()=>c(1),children:(0,x.jsx)("svg",{className:"icon",width:"18px",height:"12px",children:(0,x.jsx)("use",{href:`${m}#icon-forward-sign`})})})]})]})},u=e=>{let{income:s=0,expenses:a=0}=e;return console.log("Expenses in BudgetSummary:",a),(0,x.jsxs)("div",{className:"budget-summary-container",children:[(0,x.jsxs)("div",{className:"expenses",children:[(0,x.jsx)("div",{className:"expenses-text",children:"Expenses:"}),(0,x.jsxs)("div",{className:"expenses-sum",children:["-",a," PLN"]})," "]}),(0,x.jsx)("div",{className:"divider"}),(0,x.jsxs)("div",{className:"income",children:[(0,x.jsx)("div",{className:"income-text",children:"Income:"}),(0,x.jsxs)("div",{className:"income-sum",children:["+",s," PLN"]})]})]})},j=()=>(0,x.jsxs)("div",{className:"balance-container",children:[(0,x.jsx)("div",{className:"balance-text",children:"Balance:"}),(0,x.jsx)("div",{className:"balance-sum",children:"10000"})]}),N=e=>{let{categories:s=[]}=e;const[a,i]=(0,n.useState)(null),c=[...s].sort(((e,s)=>s.amount-e.amount));return c&&0!==c.length?(0,x.jsx)("div",{className:"items-section-expenses",children:(0,x.jsx)("div",{className:"row",children:c.map((e=>(0,x.jsxs)("div",{className:"category-item "+(a===e.name?"active":""),onClick:()=>{return s=e.name,void i((e=>e===s?null:s));var s},children:[(0,x.jsxs)("span",{className:"category-expense",children:[e.amount," PLN"]}),(0,x.jsxs)("div",{className:"icon-wrapper",children:[(0,x.jsx)("span",{className:"icon-background"}),(0,x.jsx)("svg",{className:"icon "+(a===e.name?"icon-active":""),width:"56px",height:"56px",children:(0,x.jsx)("use",{href:`${m}#icon-${e.icon}`})})]}),(0,x.jsx)("span",{className:"category-name",children:e.name})]},e.name)))})}):(0,x.jsx)("div",{className:"no-expenses-income",children:"No expenses available for this period."})},v=e=>{let{categories:s=[]}=e;const[a,i]=(0,n.useState)(null),c=[...s].sort(((e,s)=>s.amount-e.amount));return c&&0!==c.length?(0,x.jsx)("div",{className:"items-section-income",children:(0,x.jsx)("div",{className:"row",children:c.map((e=>(0,x.jsxs)("div",{className:"category-item "+(a===e.name?"active":""),onClick:()=>{return s=e.name,void i((e=>e===s?null:s));var s},children:[(0,x.jsxs)("span",{className:"category-income",children:[e.amount," PLN"]}),(0,x.jsxs)("div",{className:"icon-wrapper",children:[(0,x.jsx)("span",{className:"icon-background"}),(0,x.jsx)("svg",{className:"icon "+(a===e.name?"icon-active":""),width:"56px",height:"56px",children:(0,x.jsx)("use",{href:`${m}#icon-${e.icon}`})})]}),(0,x.jsx)("span",{className:"category-name",children:e.name})]},e.name)))})}):(0,x.jsx)("div",{className:"no-expenses-income",children:"No income available for this period."})},g=e=>{let{view:s,setView:a}=e;const n=()=>{a((e=>"expenses"===e?"income":"expenses"))};return(0,x.jsxs)("div",{className:"category-switcher",children:[(0,x.jsx)("span",{className:"arrow",onClick:n,children:(0,x.jsx)("svg",{className:"icon",width:"18px",height:"12px",children:(0,x.jsx)("use",{href:`${m}#icon-return-sign`})})}),(0,x.jsx)("span",{className:"view-name",children:"expenses"===s?"EXPENSES":"INCOME"}),(0,x.jsx)("span",{className:"arrow",onClick:n,children:(0,x.jsx)("svg",{className:"icon",width:"18px",height:"12px",children:(0,x.jsx)("use",{href:`${m}#icon-forward-sign`})})})]})},w=()=>{const e=(0,i.wA)(),{income:s,expenses:a}=(0,i.d4)((e=>e.transactions)),[c,r]=(0,n.useState)({month:(new Date).getMonth(),year:(new Date).getFullYear()}),[t,o]=(0,n.useState)(`${(new Date).getFullYear()}-${String((new Date).getMonth()+1).padStart(2,"0")}`),[d,m]=(0,n.useState)("expenses");return(0,n.useEffect)((()=>{e(l(t))}),[e,t]),(0,x.jsxs)("div",{className:"report-container",children:[(0,x.jsxs)("div",{className:"top-container",children:[(0,x.jsx)(h,{}),(0,x.jsx)(j,{}),(0,x.jsx)(p,{currentPeriod:c,setCurrentPeriod:r,onPeriodChange:o})]}),(0,x.jsx)(u,{income:null===s||void 0===s?void 0:s.incomeTotal,expenses:null===a||void 0===a?void 0:a.expenseTotal}),(0,x.jsxs)("div",{className:"category-section",children:[(0,x.jsx)(g,{view:d,setView:m}),"expenses"===d&&(0,x.jsx)(N,{categories:(null===a||void 0===a?void 0:a.expensesData)||[],type:"expense"}),"income"===d&&(0,x.jsx)(v,{categories:(null===s||void 0===s?void 0:s.incomesData)||[],type:"income"})]})]})}}}]);
//# sourceMappingURL=136.d63ce04b.chunk.js.map